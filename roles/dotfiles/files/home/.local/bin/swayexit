#!/usr/bin/env sh
# using swaylock-effects from https://github.com/mortie/swaylock-effects
# blurlock() {
# 	swaylock \
# 		--indicator \
# 		--indicator-radius 100 \
# 		--indicator-thickness 7 \
# 		--effect-blur 7x5 \
# 		--effect-vignette 0.5:0.5 \
# 		--ring-color bb00cc \
# 		--key-hl-color 880033 \
# 		--line-color 00000000 \
# 		--inside-color 00000088 \
# 		--separator-color 00000000 \
# 		--grace 5 \
# 		--fade-in 0.2
# }

case "$1" in
  lock)
    TEMP_FILE=$(mktemp --suffix=.png)
    grim -t png - | ffmpeg -loglevel quiet -y -i - -vf "gblur=sigma=10" "$TEMP_FILE"
    chayang && swaylock -i "$TEMP_FILE"
    rm "$TEMP_FILE"
    ;;
  suspend)
    swaylock && systemctl suspend
    ;;
  hibernate)
    swaylock && systemctl hibernate
    ;;
  reboot)
    systemctl reboot
    ;;
  shutdown)
    systemctl poweroff
    ;;
  logout)
    sway exit
    ;;
  *)
    echo "Usage: $0 {lock|logout|suspend|hibernate|reboot|shutdown}"
    exit 2
    ;;
esac
